# Robust Services Core: C++ Static Analysis Tools

The C++ static analysis tools are accessed through the `ct` increment,
which is entered with the CLI command `>ct`.  The commands available
in that increment are described [here](/output/help.cli.txt),
starting after the line `ct>help full`.

The contents of the code library must be defined before any of the tools
can be used. This can be done with `>read buildlib`, which imports the
entire code base using the [*buildlib*](/input/buildlib.txt) script (which,
in turn, uses the [*lib.create*](/input/lib.create.txt) script).

As the library is built, `#include` relationships are noted.  This allows
`#include` dependencies to be analyzed by the operators `us`, `ub`, `as`,
`ab`, `ca`, `ns`, and `nb`, which are described in the full help documentation.

The command `>parse - win64 $files` parses all of the files in the library
(for 64-bit Windows).  After a set of files has been parsed, the following
commands can be used on those files:

* `>check`, to look for violations of C++ design guidelines (a file that
has not been parsed is automatically parsed before it is checked, along
with any files that affect or are affected by that file)
* `>fix`, to interactively modify the files to eliminate warnings found by
`>check` (currently, about half of the warning types can be fixed automatically)
* `>export`, to generate any of the following:
   * a *.lib* file that displays the parsed code in a standard format
   * a *.trim* file that lists the external symbols used by each file, as well
   as the recommendations for which `#include` directives, `using` statements,
   and forward declarations the file should add or remove
   * an *.xref* file that contains a global cross-reference
* the `im` operator, which finds the *\*.cpp* files that implement a set of *\*.h* files

The [*output*](/output) directory contains the files generated by the `>check`
and `>export` commands for the current version of the entire code base:

* the [*.check*](/output/rsc.check.txt) file from `>check`
* the [*.lib*](/output/rsc.lib.txt) file from `>export`
* the [*.trim*](/output/rsc.trim.txt) file from `>export`
* the [*.xref*](/output/rsc.xref.txt) file from `>export`

Cursory documentation for each warning that `>check` can emit can be seen
[here](/help/cppcheck.txt).  (This file is formatted for use by the `>explain`
command but is easily readable.)

The parser currently supports everything used within RSC.  Because this is
not everything in C++11, there are limitations, many of which are noted in the
comments at the top of [*Parser.h*](/ct/Parser.h).  The goal is to support
whatever the code base uses, although some things would be deemed undesirable
or marginal and would therefore not be introduced.

The `>check` command occasionally generate false positives.  Examples include

* If the member `a.b.c` is modified, `a` may be flagged as "could be const" because
a write is only noted on what immediately precedes the *final* reference-select (`.`)
operator.
* A variable that is only modified in the second clause following a `?` operator may
be flagged as "could be const" because writes are only noted in the *first* clause.
* Because external headers in the [*subs*](/subs) directory do not provide function
implementations for templates, `>check` may suggest removing an `#include` that is
needed to make a destructor visible to a `unique_ptr` template instance, for example.
