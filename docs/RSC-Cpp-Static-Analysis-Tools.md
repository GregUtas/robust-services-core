# Robust Services Core: C++ Static Analysis Tools

The C++ static analysis tools are accessed through the `ct` increment,
which is entered with the CLI command `>ct`.  The commands available
in that increment are described [here](/output/help.cli.txt),
starting after the line `ct>help full`.

## Defining the library

The contents of the code library must be defined before any of the tools
can be used. This can be done with `>read buildlib`, which imports the
entire code base using the [_buildlib_](/input/buildlib.txt) script (which,
in turn, uses the [_lib.create_](/input/lib.create.txt) script). You can
modify these scripts to import your own code.

As the library is built, `#include` relationships are noted.  This allows
`#include` dependencies to be analyzed by the operators `ub`, `us`, `ab`,
`as`, and `ca`. After the `>parse` command has compiled the code, further
dependencies, even ones between C++ code items, can be analyzed using the
operators `nb`, `ns`, `db`, `df`, `ds`, `rb`, and `rs`. For a summary of these
operators, see the help documentation. For a more detailed discussion, see the
[article](https://www.codeproject.com/Articles/5246833/A-Static-Analysis-Tool-for-Cplusplus)
on CodeProject.

## Using the library

The command `>parse - win64 $files` parses all of the files in the library
(for 64-bit Windows).  After a set of files has been parsed, the following
commands can be used on those files:

* `>check`, to look for violations of C++ design guidelines (a file that
has not been parsed is automatically parsed before it is checked, along
with any files that affect or are affected by that file)
* `>fix`, to interactively modify the files to eliminate warnings found by
`>check` (currently, about half of the warning types can be fixed this way)
* `>export`, to generate any of the following:
   * a _.lib_ file that displays the parsed code in a standard format
   * a _.trim_ file that lists the external symbols used by each file, as well
   as the recommendations for which `#include` directives, `using` statements,
   and forward declarations the file should add or remove
   * an _.xref_ file that contains a global cross-reference
* the `im` operator, which finds the _.cpp_ files that implement a set of _.h_ files

## Examples

The [_output_](/output) directory contains the files generated by the `>check`
and `>export` commands for the current version of the entire code base:

* the [_.check_](/output/rsc.check.txt) file from `>check`
* the [_.lib_](/output/rsc.lib.txt) file from `>export`
* the [_.trim_](/output/rsc.trim.txt) file from `>export`
* the [_.xref_](/output/rsc.xref.txt) file from `>export`

Cursory documentation for each warning that `>check` can emit can be seen
[here](/help/cppcheck.txt).  (This file is formatted for use by the `>explain`
command but is easily readable.)

## Limitations

The parser currently supports everything used within RSC.  Because this is
not everything in C++11, there are limitations.  A detailed description of
exclusions can be found [here](/docs/RSC-Cpp11-Exclusions.md).  Some things
are not fully supported and can result in false positives from `>check`.  But
when code uses something that is not supported at all, it will fail to compile,
which will limit the usefulness of the tools.  If you run into this, you are
welcome to request that the missing language feature(s) be supported.
